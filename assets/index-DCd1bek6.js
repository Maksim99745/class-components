const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MainPage-C1bsDNYc.js","assets/react-BWtM72Fx.js","assets/react-redux-DGd5iOsm.js","assets/use-sync-external-store-DVoJ7RR5.js","assets/react-router-dom-CyljvOGg.js","assets/react-dom-BGFKlzYW.js","assets/scheduler-CzFDRTuY.js","assets/react-router-C_NjS6MD.js","assets/@remix-run-DGxTVJB8.js","assets/redux-E-Rf1aW7.js","assets/@reduxjs-BripY6zo.js","assets/immer-66utYGpe.js","assets/reselect-DUoTfIGH.js","assets/redux-thunk-ClJT1hhx.js","assets/MainPage-D5sJxltB.css","assets/NotFound-DctR-RD7.js","assets/CharacterDetails-DPZAwR4S.js","assets/CharacterDetails-jKSBGFDU.css"])))=>i.map(i=>d[i]);
import{a as g,j as r,r as a}from"./react-BWtM72Fx.js";import{c as C}from"./react-dom-BGFKlzYW.js";import{P as T}from"./react-redux-DGd5iOsm.js";import{c as b,R as L}from"./react-router-dom-CyljvOGg.js";import{c as k,f as w,a as _,b as R}from"./@reduxjs-BripY6zo.js";import{c as A}from"./redux-E-Rf1aW7.js";import"./scheduler-CzFDRTuY.js";import"./use-sync-external-store-DVoJ7RR5.js";import"./react-router-C_NjS6MD.js";import"./@remix-run-DGxTVJB8.js";import"./immer-66utYGpe.js";import"./reselect-DUoTfIGH.js";import"./redux-thunk-ClJT1hhx.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();class B extends g.Component{constructor(e){super(e),this.state={error:null,hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){console.error("Caught an error in ErrorBoundary:",e,n),this.setState({error:e})}render(){const{error:e,hasError:n}=this.state,{children:c}=this.props;return n?r.jsxs("div",{children:[r.jsx("h1",{children:"Something went wrong."}),r.jsxs("h3",{children:["Error: ",e==null?void 0:e.message]})]}):c}}const v=a.createContext(!1),j=a.createContext(()=>{});function O({children:t}){const[e,n]=a.useState(!1),c=a.useCallback(()=>{n(s=>!s)},[]);return r.jsx(j.Provider,{value:c,children:r.jsx(v.Provider,{value:e,children:t})})}const N="_loader-spinner_18shf_1",$="_spin_18shf_1",D={"loader-spinner":"_loader-spinner_18shf_1",loaderSpinner:N,spin:$};function m(){return r.jsx("div",{className:D.loaderSpinner,"data-testid":"loader"})}const q="modulepreload",I=function(t){return"/"+t},f={},p=function(e,n,c){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),i=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.all(n.map(l=>{if(l=I(l),l in f)return;f[l]=!0;const u=l.endsWith(".css"),E=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${E}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":q,u||(d.as="script",d.crossOrigin=""),d.href=l,i&&d.setAttribute("nonce",i),document.head.appendChild(d),u)return new Promise((P,S)=>{d.addEventListener("load",P),d.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${l}`)))})}))}return s.then(()=>e()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})},U=a.lazy(()=>p(()=>import("./MainPage-C1bsDNYc.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))),y=a.lazy(()=>p(()=>import("./NotFound-DctR-RD7.js"),__vite__mapDeps([15,1]))),F=a.lazy(()=>p(()=>import("./CharacterDetails-DPZAwR4S.js"),__vite__mapDeps([16,1,4,5,6,7,8,2,3,10,9,11,12,13,17]))),Q=b([{path:"/",element:r.jsx(U,{}),children:[{path:"details/:characterName",element:r.jsx(a.Suspense,{fallback:r.jsx(m,{}),children:r.jsx(F,{})})}]},{path:"*",element:r.jsx(a.Suspense,{fallback:r.jsx(m,{}),children:r.jsx(y,{})})},{path:"/404",element:r.jsx(a.Suspense,{fallback:r.jsx(m,{}),children:r.jsx(y,{})})}]),z=()=>a.useContext(v),fe=()=>a.useContext(j),V="_dark-theme_y9ntt_1",G={"dark-theme":"_dark-theme_y9ntt_1",darkTheme:V};function K(){const t=z();return r.jsx("div",{className:t?G.darkTheme:void 0,"data-testid":"theme-container",children:r.jsx("div",{className:"App",children:r.jsx(L,{router:Q,fallbackElement:r.jsx(m,{})})})})}const W="https://swapi.dev/api/people/",h=k({reducerPath:"api",tagTypes:["Characters"],baseQuery:w({baseUrl:W}),endpoints:t=>({getCharacterByName:t.query({query:e=>`/?search=${e}`}),getCharactersByPage:t.query({query:e=>`/?page=${e}`})})}),{useGetCharacterByNameQuery:ye,useGetCharactersByPageQuery:xe}=h,H=[],J=_({name:"characters",initialState:H,reducers:{updateCharacters:(t,e)=>{const n=e.payload;t.pop(),n&&t.push(n)}}}),{actions:ge,reducer:M}=J,X=[],Y=_({name:"favorite",initialState:X,reducers:{toggleFavorite:(t,e)=>{const n=e.payload,c=t.findIndex(s=>s.name===n.name);c>=0?t.splice(c,1):t.push(n)},unselectAll:t=>{for(let e=0;e<t.length;e+=1)t.splice(0,t.length)}}}),{actions:_e,reducer:Z}=Y,ee=A({favorites:Z,characters:M,[h.reducerPath]:h.reducer}),re=R({reducer:ee,middleware:t=>t().concat(h.middleware)}),x=document.getElementById("root");x&&C.createRoot(x).render(r.jsx(g.StrictMode,{children:r.jsx(B,{children:r.jsx(T,{store:re,children:r.jsx(O,{children:r.jsx(K,{})})})})}));export{m as L,_e as a,ge as b,fe as c,ye as d,xe as e,z as u};
